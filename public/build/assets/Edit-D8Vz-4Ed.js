import{d as D,T as w,m as N,p as C,g as h,a as s,u as e,w as u,F as V,o as x,Z as T,b as r,f as q,l as U,t as _,k as B}from"./app-DZoBKGZG.js";import{_ as L}from"./Accordion.vue_vue_type_script_setup_true_lang-DrFtu97q.js";import{_ as M}from"./ChangeLogs.vue_vue_type_script_setup_true_lang-CM9wAAsf.js";import{_ as k}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-BaTV168D.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-BUWzph9K.js";import{_ as g,a as y}from"./TextInput.vue_vue_type_script_setup_true_lang-CgHbG7pE.js";import{_ as P}from"./Modal.vue_vue_type_script_setup_true_lang-Ciu7lPW0.js";import{_ as W}from"./Table.vue_vue_type_script_setup_true_lang-DRoSuR1S.js";import{W as m,_ as I,w as R,f as K,d as $,a as Q}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CsEbJKQA.js";import{_ as Z}from"./PencilSquare.vue_vue_type_script_setup_true_lang-6M3mvyf2.js";import{_ as z}from"./Trash.vue_vue_type_script_setup_true_lang-BWN4TzIp.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-Boz-CXxt.js";const A={class:"py-12"},G={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},H={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},J={class:"p-6 text-gray-900 dark:text-gray-100"},O={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},X={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4 mt-4"},Y={class:"text-gray-900 dark:text-gray-100"},ee={class:"flex gap-1.5"},te={class:"flex gap-1.5"},ae={class:"flex gap-1.5"},se=["onClick"],le={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},he=D({__name:"Edit",props:{product:{},dataTable:{},changeLogs:{}},setup(E){const d=E,c=(o,a)=>{var t;return((t=o==null?void 0:o.find(n=>n.warehouse===a))==null?void 0:t.quantity)??null},l=w({_method:"put",id:d.product.id,name:d.product.name,internal_id:d.product.internal_id,minimum_quantity:d.product.minimum_quantity,quantities:{Varna:c(d.product.quantity,m.Varna),France:c(d.product.quantity,m.France),Netherlands:c(d.product.quantity,m.Netherlands)}});N(()=>d.product.quantity,o=>{l.quantities.Varna=c(o,m.Varna),l.quantities.France=c(o,m.France),l.quantities.Netherlands=c(o,m.Netherlands)});const j=async o=>new Promise((a,t)=>{l.post(route("products.update",d.product.id),{preserveScroll:!0,preserveState:!0,forceFormData:!0,only:Q(o),onSuccess:()=>{a()},onError:()=>{t(new Error("Error, during update"))}})}),v=C(!1),b=()=>{v.value=!1,i.reset()},F=o=>{var a;i.id=o.id,i.name=(a=o.project)==null?void 0:a.name,i.created_at=o.created_at,v.value=!0},i=w({id:null,name:null,created_at:null}),S=()=>{i.delete(route("projects.destroy-product"),{preserveScroll:!0}),b()};return(o,a)=>(x(),h(V,null,[s(e(T),{title:"Product"}),s(I,null,{header:u(()=>a[6]||(a[6]=[r("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product ",-1)])),default:u(()=>[r("div",A,[r("div",G,[r("div",H,[r("div",J,[r("div",O,[r("form",{class:"mt-6 space-y-6",onSubmit:a[4]||(a[4]=q(t=>j(),["prevent"]))},[r("div",null,[s(g,{for:"name",value:"Name"}),s(y,{id:"name",modelValue:e(l).name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).name=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),s(f,{class:"mt-2",message:e(l).errors.name},null,8,["message"])]),r("div",null,[s(g,{for:"internal_id",value:"Internal Id"}),s(y,{id:"internal_id",modelValue:e(l).internal_id,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).internal_id=t),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),s(f,{class:"mt-2",message:e(l).errors.internal_id},null,8,["message"])]),r("div",null,[s(g,{for:"minimum_quantity",value:"Minimum Quantity"}),s(y,{id:"minimum_quantity",modelValue:e(l).minimum_quantity,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).minimum_quantity=t),type:"number",step:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),s(f,{class:"mt-2",message:e(l).errors.minimum_quantity},null,8,["message"])]),(x(!0),h(V,null,U(e(R),(t,n)=>(x(),h("div",{key:n},[s(g,{for:"quantities_"+t.name,value:`Quantity ${t.name}`},null,8,["for","value"]),s(y,{id:"quantities_"+t.name,modelValue:e(l).quantities[t.name],"onUpdate:modelValue":p=>e(l).quantities[t.name]=p,type:"number",step:"1",class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),s(f,{class:"mt-2",message:e(l).errors["quantities."+t.name]},null,8,["message"])]))),128)),s(k,{processing:e(l).processing,"recently-successful":e(l).recentlySuccessful,onReset:a[3]||(a[3]=t=>e(l).reset())},null,8,["processing","recently-successful"])],32)])])]),s(M,{"change-logs-limited":o.product.change_logs_limited,"change-logs":o.changeLogs},null,8,["change-logs-limited","change-logs"]),r("div",X,[s(L,null,{head:u(()=>a[7]||(a[7]=[r("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Projects ",-1)])),default:u(()=>[r("div",Y,[s(W,{"data-table":o.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1},{"cell(project.warehouse)":u(({value:t,item:n})=>[r("div",ee,_(e(K)(e(m),n.project.warehouse)),1)]),"cell(created_at)":u(({value:t,item:n})=>[r("div",te,_(e($)(t)),1)]),"cell(action)":u(({value:t,item:n})=>{var p;return[r("div",ae,[s(e(B),{class:"border border-[#E9E7E7] rounded-md p-1 active:scale-90 transition",title:"Edit project",href:o.route("projects.edit",(p=n.project)==null?void 0:p.id)},{default:u(()=>[s(Z,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),r("button",{title:"Delete product",class:"border border-[#E9E7E7] rounded-md p-1 active:scale-90 transition",onClick:re=>F(n)},[s(z,{classes:"w-4 h-4 text-[#909090]"})],8,se)])]}),_:1},8,["data-table"])])]),_:1})])])])]),_:1}),s(P,{show:v.value,onClose:b},{default:u(()=>{var t,n;return[r("div",le," Delete from project "+_(((t=e(i))==null?void 0:t.name)??"")+" added on "+_(e($)((n=e(i))==null?void 0:n.created_at))+" ? ",1),r("form",{class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4",onSubmit:q(S,["prevent"])},[s(k,{processing:e(i).processing,"recently-successful":e(i).recentlySuccessful,"is-delete":!0,onReset:a[5]||(a[5]=p=>e(i).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{he as default};
