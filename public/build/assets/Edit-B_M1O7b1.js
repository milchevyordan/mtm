import{d as x,T as w,Q as k,g as c,a as s,u as a,w as u,F as g,o as n,Z as q,b as e,k as f,l as R,n as h,h as $,t as E}from"./app-CQtSQgKZ.js";import{_ as V}from"./Accordion.vue_vue_type_script_setup_true_lang-DRNCI2tO.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-C3-D53nt.js";import{_ as P}from"./InputLabel.vue_vue_type_script_setup_true_lang-5wIMtVX8.js";import{_ as S}from"./Select.vue_vue_type_script_setup_true_lang-D7zzk2sb.js";import{_ as C}from"./TextInput.vue_vue_type_script_setup_true_lang-B1SDdhnE.js";import{_ as N}from"./Table.vue_vue_type_script_setup_true_lang-9_X-p52k.js";import{P as T}from"./ProductRequestStatus-tW5n8ZRv.js";import{_ as U,W,r as B}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Dnqwrodx.js";import{_ as j}from"./DocumentText.vue_vue_type_script_setup_true_lang-6Zx0gmOe.js";import{_ as z}from"./PencilSquare.vue_vue_type_script_setup_true_lang-vYMtWUOK.js";import{_ as F}from"./Tick.vue_vue_type_script_setup_true_lang-skaj8IvV.js";import"./multiselect-C8luFpVZ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-DgdpeQc9.js";const Q={class:"py-12"},A={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},D={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},L={class:"text-gray-900 dark:text-gray-100"},O={class:"flex-col gap-1.5 pt-2"},Z={class:"flex gap-1.5"},G={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},H={class:"p-6 text-gray-900 dark:text-gray-100"},I={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},J={class:"mt-6 space-y-6"},K={class:"p-2 pt-8"},M={class:"flex items-center"},X=["onClick"],Y={class:"flex items-center"},ee={key:0,class:"flex w-full bg-gray-200 h-0.5 dark:bg-gray-700"},te={class:"mt-3"},se={class:"font-medium text-gray-900 dark:text-white"},be=x({__name:"Edit",props:{productRequest:{},dataTable:{},productProductRequest:{}},setup(v){const i=v,l=w({_method:"put",id:i.productRequest.id,warehouse:k().props.auth.user.warehouse,status:null,products:i.productProductRequest}),m=t=>t>i.productRequest.status,y=async t=>{if(m(t))return l.status=t,new Promise((o,r)=>{l.post(route("product-requests.update",i.productRequest.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{o()},onError:()=>{r(new Error("Error, during update"))}})})},p=Object.entries(T).filter(([t])=>isNaN(Number(t))).map(([t,o])=>({name:t,value:o}));return(t,o)=>(n(),c(g,null,[s(a(q),{title:"Product Request"}),s(U,null,{header:u(()=>o[1]||(o[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product Request ",-1)])),default:u(()=>[e("div",Q,[e("div",A,[e("div",D,[s(V,null,{head:u(()=>o[2]||(o[2]=[e("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Products ",-1)])),default:u(()=>[e("div",L,[s(N,{"data-table":t.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1},{"cell(actual_quantity)":u(({value:r,item:d})=>[e("div",O,[s(C,{id:"actual_quantities_"+d.product_id,modelValue:a(l).products[d.product_id].actual_quantity,"onUpdate:modelValue":_=>a(l).products[d.product_id].actual_quantity=_,type:"number",placeholder:"Actual Quantity Received",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),s(b,{class:"mt-2",message:a(l).errors["products."+d.product_id+".actual_quantity"]},null,8,["message"])])]),"cell(action)":u(({value:r,item:d})=>[e("div",Z,[s(a(f),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:t.route("products.edit",d.product_id)},{default:u(()=>[s(z,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),s(a(f),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:t.route("products.show",d.product_id)},{default:u(()=>[s(j,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])])]),_:1},8,["data-table"])])]),_:1})]),e("div",G,[e("div",H,[e("div",I,[e("div",J,[e("div",null,[s(P,{for:"warehouse",value:"To Warehouse"}),s(S,{id:"warehouse",modelValue:a(l).warehouse,"onUpdate:modelValue":o[0]||(o[0]=r=>a(l).warehouse=r),name:"warehouse",options:a(W),placeholder:"To Warehouse",disabled:"",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),s(b,{class:"mt-2",message:a(l).errors.warehouse},null,8,["message"])]),e("div",K,[e("ol",M,[(n(!0),c(g,null,R(a(p),(r,d)=>(n(),c("li",{key:d,class:h(["relative w-full mb-6",{"cursor-pointer":m(r.value)}]),onClick:_=>y(r.value)},[e("div",Y,[e("div",{class:h(["z-10 flex items-center justify-center w-6 h-6 rounded-full ring-0 ring-white sm:ring-8 dark:ring-gray-900 shrink-0",{"bg-blue-600 dark:bg-blue-900":t.productRequest.status>=r.value,"bg-gray-200 dark:bg-gray-700":t.productRequest.status<r.value}])},[s(F)],2),r.value<a(p).length?(n(),c("div",ee)):$("",!0)]),e("div",te,[e("h3",se,E(a(B)(r.name)),1)])],10,X))),128))])])])])])])])])]),_:1})],64))}});export{be as default};
