import{d as E,o as F,g as U,b as s,n as b,m as x,T as k,a,u as e,w as i,F as L,Z,k as j,e as G,t as y,f as C,p as J}from"./app-DSLhrDtp.js";import{_ as $}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-6rqfukep.js";import{_ as g}from"./InputError.vue_vue_type_script_setup_true_lang-DxMfHq-p.js";import{_ as h,a as S}from"./TextInput.vue_vue_type_script_setup_true_lang-BWF5scqG.js";import{_ as P}from"./Modal.vue_vue_type_script_setup_true_lang-D2qRSkfB.js";import{_ as O}from"./Select.vue_vue_type_script_setup_true_lang-F6sFXKXJ.js";import{_ as X}from"./Table.vue_vue_type_script_setup_true_lang--nFMECo1.js";import{_ as Y,d as D,f as W,W as B,b as ee}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-DFvuS7uT.js";import{_ as te}from"./DocumentText.vue_vue_type_script_setup_true_lang-CEaJ1Iq6.js";import{_ as ae}from"./PencilSquare.vue_vue_type_script_setup_true_lang-dZS4eWtD.js";import{_ as se}from"./Trash.vue_vue_type_script_setup_true_lang-Dd-Wnruf.js";import"./multiselect-BXk2EP-e.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-D7PndKGV.js";const oe=E({__name:"Plus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(V){return(_,f)=>(F(),U("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:b(_.classes)},f[0]||(f[0]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"},null,-1)]),2))}}),re={class:"py-12"},le={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ne={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},ue={class:"p-6 text-gray-900 dark:text-gray-100"},de={class:"w-full flex gap-2"},ie={class:"flex gap-1.5"},ce=["onClick"],pe=["onClick"],me=["onClick"],ye={class:"flex gap-1.5"},_e=["onClick"],fe=["onClick"],ge={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},he={class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4"},be={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},ve={class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4"},we={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},We=E({__name:"Index",props:{dataTable:{},projects:{},projectWarehouse:{}},setup(V){const _=V,f=x(!1),v=x(!1),M=()=>{f.value=!1,u.reset()},T=()=>{v.value=!1,n.reset()},u=k({_method:"put",id:null,product_id:null,warehouse:null,quantity:null}),n=k({product_id:null,project_id:null,quantity:null,available_quantity:null,warehouse:null,quantities:null}),w=l=>{u.id=l.id,u.product_id=l.product_id,u.warehouse=l.warehouse,u.quantity=l.quantity,f.value=!0},N=async l=>{n.product_id=l.id,n.quantities=l.quantity,(!_.projects||!_.projectWarehouse)&&await new Promise((o,t)=>{J.reload({only:["projects","projectWarehouse"],onSuccess:o,onError:t})}),v.value=!0},R=l=>{var o;_.projectWarehouse&&(n.warehouse=_.projectWarehouse[l.value]??null,n.available_quantity=((o=n.quantities.find(t=>t.warehouse==n.warehouse))==null?void 0:o.quantity)??null)},K=()=>new Promise((l,o)=>{u.post(route("products.update-quantity",u.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l()},onError:()=>{o()}}),M()}),z=()=>new Promise((l,o)=>{n.post(route("products.add-to-project"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l()},onError:()=>{o()}}),T()}),q=x(!1),c=k({id:null,name:null,created_at:null}),H=l=>{c.id=l.id,c.name=l.name,c.created_at=l.created_at,q.value=!0},A=()=>{q.value=!1,c.reset()},I=()=>{c.delete(route("products.destroy",c.id),{preserveScroll:!0}),A()};return(l,o)=>(F(),U(L,null,[a(e(Z),{title:"Product"}),a(Y,null,{header:i(()=>o[6]||(o[6]=[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product ",-1)])),default:i(()=>[s("div",re,[s("div",le,[s("div",ne,[s("div",ue,[a(X,{"data-table":l.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"show-trashed":!0,"advanced-filters":!1},{additionalContent:i(()=>[s("div",de,[a(e(j),{class:"w-full md:w-auto border border-gray-300 dark:border-gray-700 rounded-md px-5 py-1.5 active:scale-95 transition hover:bg-gray-50 dark:hover:bg-gray-800",href:l.route("products.create")},{default:i(()=>o[7]||(o[7]=[G(" Create Product ")])),_:1},8,["href"])])]),"cell(created_at)":i(({value:t,item:r})=>[s("div",ie,y(e(D)(t)),1)]),"cell(quantity_varna)":i(({value:t,item:r})=>{var d,p,m;return[s("div",{class:b(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((d=t[0])==null?void 0:d.quantity)??null)<r.minimum_quantity,"bg-transparent":(((p=t[0])==null?void 0:p.quantity)??null)>=r.minimum_quantity}]),onClick:Q=>w(t[0]??null)},y(((m=t[0])==null?void 0:m.quantity)??""),11,ce)]}),"cell(quantity_france)":i(({value:t,item:r})=>{var d,p,m;return[s("div",{class:b(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((d=t[0])==null?void 0:d.quantity)??null)<r.minimum_quantity,"bg-transparent":(((p=t[0])==null?void 0:p.quantity)??null)>=r.minimum_quantity}]),onClick:Q=>w(t[0]??null)},y(((m=t[0])==null?void 0:m.quantity)??""),11,pe)]}),"cell(quantity_netherlands)":i(({value:t,item:r})=>{var d,p,m;return[s("div",{class:b(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((d=t[0])==null?void 0:d.quantity)??null)<r.minimum_quantity,"bg-transparent":(((p=t[0])==null?void 0:p.quantity)??null)>=r.minimum_quantity}]),onClick:Q=>w(t[0]??null)},y(((m=t[0])==null?void 0:m.quantity)??""),11,me)]}),"cell(action)":i(({value:t,item:r})=>[s("div",ye,[a(e(j),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:l.route("products.edit",r.id)},{default:i(()=>[a(ae,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),a(e(j),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:l.route("products.show",r.id)},{default:i(()=>[a(te,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),s("button",{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Add to project",onClick:d=>N(r)},[a(oe,{classes:"w-4 h-4 text-[#909090]"})],8,_e),s("button",{title:"Delete",class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:d=>H(r)},[a(se,{classes:"w-4 h-4 text-[#909090]"})],8,fe)])]),_:1},8,["data-table"])])])])])]),_:1}),a(P,{show:f.value,"max-width":"lg",onClose:M},{default:i(()=>{var t,r;return[s("div",ge,[s("div",null,"Change quantity of product # "+y((t=e(u))==null?void 0:t.product_id),1)]),s("form",{class:"p-6",onSubmit:C(K,["prevent"])},[s("div",null,[a(h,{for:"quantity",value:`Quantity ${e(W)(e(B),(r=e(u))==null?void 0:r.warehouse)}`},null,8,["value"]),a(S,{id:"quantity",modelValue:e(u).quantity,"onUpdate:modelValue":o[0]||(o[0]=d=>e(u).quantity=d),type:"number",step:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),a(g,{class:"mt-2",message:e(u).errors.quantity},null,8,["message"])]),s("div",he,[a($,{processing:e(u).processing,"recently-successful":e(u).recentlySuccessful,onReset:o[1]||(o[1]=d=>e(u).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),a(P,{show:v.value,"max-width":"lg",onClose:T},{default:i(()=>{var t;return[s("div",be,[s("div",null,"Add product # "+y((t=e(n))==null?void 0:t.product_id)+" to project",1)]),s("form",{class:"p-6",onSubmit:C(z,["prevent"])},[s("div",null,[a(h,{for:"project",value:"Project"}),a(O,{modelValue:e(n).project_id,"onUpdate:modelValue":o[2]||(o[2]=r=>e(n).project_id=r),name:"project_id",options:l.projects,placeholder:"Project",class:"mt-1 block w-full mb-3.5",onSelect:R},null,8,["modelValue","options"]),a(g,{class:"mt-2",message:e(n).errors.project_id},null,8,["message"])]),s("div",null,[a(h,{for:"available_quantity",value:`Available quantity in ${e(W)(e(B),e(n).warehouse)??"warehouse"}`},null,8,["value"]),a(S,{id:"quantity","model-value":e(n).available_quantity,type:"number",placeholder:"Available quantity",disabled:!0,class:"mt-1 block w-full mb-3.5"},null,8,["model-value"]),a(g,{class:"mt-2",message:e(n).errors.available_quantity},null,8,["message"])]),s("div",null,[a(h,{for:"quantity",value:`Quantity to add to ${e(ee)(_.projects,e(n).project_id)??"project"}`},null,8,["value"]),a(S,{id:"quantity",modelValue:e(n).quantity,"onUpdate:modelValue":o[3]||(o[3]=r=>e(n).quantity=r),type:"number",placeholder:"Quantity to add",step:"1",min:0,max:e(n).available_quantity,class:"mt-1 block w-full"},null,8,["modelValue","max"]),a(g,{class:"mt-2",message:e(n).errors.quantity},null,8,["message"])]),s("div",ve,[a($,{processing:e(u).processing,"recently-successful":e(u).recentlySuccessful,onReset:o[4]||(o[4]=r=>e(u).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),a(P,{show:q.value,onClose:A},{default:i(()=>{var t,r;return[s("div",we," Delete project "+y(((t=e(c))==null?void 0:t.name)??"")+" added on "+y(e(D)((r=e(c))==null?void 0:r.created_at))+" ? ",1),s("form",{class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4",onSubmit:C(I,["prevent"])},[a($,{processing:e(c).processing,"recently-successful":e(c).recentlySuccessful,"is-delete":!0,onReset:o[5]||(o[5]=d=>e(c).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{We as default};
