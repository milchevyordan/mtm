import{d as O,m as y,T as k,g as W,a,u as e,w as d,F as X,o as F,Z as Y,b as o,k as _,e as ee,t as p,n as C,f as $,h as te,q as B}from"./app-DAbYb2vv.js";import{_ as P}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-DHdhTW2m.js";import{_ as h}from"./InputError.vue_vue_type_script_setup_true_lang-BV-YcJ_7.js";import{_ as b}from"./InputLabel.vue_vue_type_script_setup_true_lang-CE8v7oz8.js";import{_ as v}from"./Modal.vue_vue_type_script_setup_true_lang-CvZhZHtc.js";import{_ as ae}from"./Select.vue_vue_type_script_setup_true_lang-CnIBBA5m.js";import{_ as S}from"./TextInput.vue_vue_type_script_setup_true_lang-CkelCZ7S.js";import{_ as N}from"./Table.vue_vue_type_script_setup_true_lang-C9O9liey.js";import{_ as oe,d as T,f as D,W as V,b as se}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Du-zednV.js";import{_ as U}from"./DocumentText.vue_vue_type_script_setup_true_lang-MFNsrQL4.js";import{_ as re}from"./PencilSquare.vue_vue_type_script_setup_true_lang-6TM63cvL.js";import{_ as le}from"./Plus.vue_vue_type_script_setup_true_lang-DVqko7Mg.js";import{_ as ne}from"./Trash.vue_vue_type_script_setup_true_lang-BIPHFWlw.js";import{_ as de}from"./Document.vue_vue_type_script_setup_true_lang-DTtdkdzT.js";import"./PrimaryButton-BBS5AR-0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-GicdNelz.js";import"./multiselect-D-expTso.js";import"./ApplicationLogo-3jOI2Qmj.js";const ie={class:"py-12"},ue={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ce={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},pe={class:"p-6 text-gray-900 dark:text-gray-100"},me={class:"w-full flex gap-2"},fe={class:"flex gap-1.5"},ye=["onClick"],_e=["onClick"],he=["onClick"],be={class:"flex gap-1.5"},ve=["onClick"],ge=["onClick"],we=["onClick"],xe={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},je={class:"col-span-2 flex justify-end gap-3 my-2 pt-1 px-4"},qe={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},ke={class:"col-span-2 flex justify-end gap-3 my-2 pt-1 px-4"},Ce={key:0,class:"text-gray-900 dark:text-gray-100"},$e={class:"flex gap-1.5"},Pe={class:"flex gap-1.5"},Se={class:"flex gap-1.5"},Te={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},Je=O({__name:"Index",props:{dataTable:{},projects:{},projectWarehouse:{},showProjectsDataTable:{}},setup(R){const f=R,g=y(!1),K=()=>{g.value=!1},z=async r=>{await new Promise((s,t)=>{B.reload({data:{product_id:r},only:["showProjectsDataTable"],onSuccess:s,onError:t})}),g.value=!0},w=y(!1),x=y(!1),M=()=>{w.value=!1,i.reset()},A=()=>{x.value=!1,n.reset()},i=k({_method:"put",id:null,product_id:null,warehouse:null,quantity:null}),n=k({product_id:null,project_id:null,quantity:null,available_quantity:null,warehouse:null,quantities:null}),j=r=>{i.id=r.id,i.product_id=r.product_id,i.warehouse=r.warehouse,i.quantity=r.quantity,w.value=!0},I=async r=>{n.product_id=r.id,n.quantities=r.quantity,(!f.projects||!f.projectWarehouse)&&await new Promise((s,t)=>{B.reload({only:["projects","projectWarehouse"],onSuccess:s,onError:t})}),x.value=!0},L=r=>{var s;f.projectWarehouse&&(n.warehouse=f.projectWarehouse[r.value]??null,n.available_quantity=((s=n.quantities.find(t=>t.warehouse==n.warehouse))==null?void 0:s.quantity)??null)},Z=()=>new Promise((r,s)=>{i.post(route("products.update-quantity",i.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r()},onError:()=>{s()}}),M()}),G=()=>new Promise((r,s)=>{n.post(route("products.add-to-project"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r()},onError:()=>{s()}}),A()}),q=y(!1),c=k({id:null,name:null,created_at:null}),H=r=>{c.id=r.id,c.name=r.name,c.created_at=r.created_at,q.value=!0},Q=()=>{q.value=!1,c.reset()},J=()=>{c.delete(route("products.destroy",c.id),{preserveScroll:!0}),Q()};return(r,s)=>(F(),W(X,null,[a(e(Y),{title:"Product"}),a(oe,null,{header:d(()=>s[6]||(s[6]=[o("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product ",-1)])),default:d(()=>[o("div",ie,[o("div",ue,[o("div",ce,[o("div",pe,[a(N,{"data-table":r.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"show-trashed":!0,"advanced-filters":!1},{additionalContent:d(()=>[o("div",me,[a(e(_),{class:"w-full md:w-auto border border-gray-300 dark:border-gray-700 rounded-md px-5 py-1.5 active:scale-95 transition hover:bg-gray-50 dark:hover:bg-gray-800",href:r.route("products.create")},{default:d(()=>s[7]||(s[7]=[ee(" Create Product ")])),_:1},8,["href"])])]),"cell(created_at)":d(({value:t,item:l})=>[o("div",fe,p(e(T)(t)),1)]),"cell(quantity_varna)":d(({value:t,item:l})=>{var u,m;return[o("div",{class:C(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=t[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:E=>j(t[0]??null)},p(((m=t[0])==null?void 0:m.quantity)??""),11,ye)]}),"cell(quantity_france)":d(({value:t,item:l})=>{var u,m;return[o("div",{class:C(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=t[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:E=>j(t[0]??null)},p(((m=t[0])==null?void 0:m.quantity)??""),11,_e)]}),"cell(quantity_netherlands)":d(({value:t,item:l})=>{var u,m;return[o("div",{class:C(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=t[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:E=>j(t[0]??null)},p(((m=t[0])==null?void 0:m.quantity)??""),11,he)]}),"cell(action)":d(({value:t,item:l})=>[o("div",be,[a(e(_),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:r.route("products.edit",l.id)},{default:d(()=>[a(re,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),a(e(_),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:r.route("products.show",l.id)},{default:d(()=>[a(U,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),o("button",{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Add to project",onClick:u=>I(l)},[a(le,{classes:"w-4 h-4 text-[#909090]"})],8,ve),o("button",{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show products",onClick:u=>z(l.id)},[a(de,{classes:"w-4 h-4 text-[#909090]"})],8,ge),o("button",{title:"Delete",class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:u=>H(l)},[a(ne,{classes:"w-4 h-4 text-[#909090]"})],8,we)])]),_:1},8,["data-table"])])])])])]),_:1}),a(v,{show:w.value,"max-width":"lg",onClose:M},{default:d(()=>{var t,l;return[o("div",xe,[o("div",null,"Change quantity of product # "+p((t=e(i))==null?void 0:t.product_id),1)]),o("form",{class:"p-6",onSubmit:$(Z,["prevent"])},[o("div",null,[a(b,{for:"quantity",value:`Quantity ${e(D)(e(V),(l=e(i))==null?void 0:l.warehouse)}`},null,8,["value"]),a(S,{id:"quantity",modelValue:e(i).quantity,"onUpdate:modelValue":s[0]||(s[0]=u=>e(i).quantity=u),type:"number",step:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),a(h,{class:"mt-2",message:e(i).errors.quantity},null,8,["message"])]),o("div",je,[a(P,{processing:e(i).processing,"recently-successful":e(i).recentlySuccessful,onReset:s[1]||(s[1]=u=>e(i).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),a(v,{show:x.value,"max-width":"lg",onClose:A},{default:d(()=>{var t;return[o("div",qe,[o("div",null,"Add product # "+p((t=e(n))==null?void 0:t.product_id)+" to project",1)]),o("form",{class:"p-6",onSubmit:$(G,["prevent"])},[o("div",null,[a(b,{for:"project",value:"Project"}),a(ae,{modelValue:e(n).project_id,"onUpdate:modelValue":s[2]||(s[2]=l=>e(n).project_id=l),name:"project_id",options:r.projects,placeholder:"Project",class:"mt-1 block w-full mb-3.5",onSelect:L},null,8,["modelValue","options"]),a(h,{class:"mt-2",message:e(n).errors.project_id},null,8,["message"])]),o("div",null,[a(b,{for:"available_quantity",value:`Available quantity in ${e(D)(e(V),e(n).warehouse)??"warehouse"}`},null,8,["value"]),a(S,{id:"quantity","model-value":e(n).available_quantity,type:"number",placeholder:"Available quantity",disabled:!0,class:"mt-1 block w-full mb-3.5"},null,8,["model-value"]),a(h,{class:"mt-2",message:e(n).errors.available_quantity},null,8,["message"])]),o("div",null,[a(b,{for:"quantity",value:`Quantity to add to ${e(se)(f.projects,e(n).project_id)??"project"}`},null,8,["value"]),a(S,{id:"quantity",modelValue:e(n).quantity,"onUpdate:modelValue":s[3]||(s[3]=l=>e(n).quantity=l),type:"number",placeholder:"Quantity to add",step:"1",min:1,max:e(n).available_quantity,class:"mt-1 block w-full"},null,8,["modelValue","max"]),a(h,{class:"mt-2",message:e(n).errors.quantity},null,8,["message"])]),o("div",ke,[a(P,{processing:e(i).processing,"recently-successful":e(i).recentlySuccessful,onReset:s[4]||(s[4]=l=>e(i).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),a(v,{show:g.value,"max-width":"6xl",onClose:K},{default:d(()=>[s[8]||(s[8]=o("div",{class:"px-3.5 p-3 text-xl font-medium"}," Projects ",-1)),r.showProjectsDataTable?(F(),W("div",Ce,[a(N,{"data-table":r.showProjectsDataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"prop-name":"showProjectsDataTable"},{"cell(created_at)":d(({value:t,item:l})=>[o("div",$e,p(e(T)(t)),1)]),"cell(project.warehouse)":d(({value:t,item:l})=>[o("div",Pe,p(e(D)(e(V),l.project.warehouse)),1)]),"cell(action)":d(({value:t,item:l})=>[o("div",Se,[a(e(_),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show project",href:r.route("projects.show",l.project_id)},{default:d(()=>[a(U,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])])]),_:1},8,["data-table"])])):te("",!0)]),_:1},8,["show"]),a(v,{show:q.value,onClose:Q},{default:d(()=>{var t,l;return[o("div",Te," Delete project "+p(((t=e(c))==null?void 0:t.name)??"")+" added on "+p(e(T)((l=e(c))==null?void 0:l.created_at))+" ? ",1),o("form",{class:"col-span-2 flex justify-end gap-3 my-2 pt-1 px-4",onSubmit:$(J,["prevent"])},[a(P,{processing:e(c).processing,"recently-successful":e(c).recentlySuccessful,"is-delete":!0,onReset:s[5]||(s[5]=u=>e(c).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{Je as default};
