import{d as k,T as q,g as c,a,u as t,w as d,F as f,o as n,Z as V,b as e,t as g,k as h,l as $,n as y,h as E}from"./app-DNzCrRZN.js";import{_ as R}from"./Accordion.vue_vue_type_script_setup_true_lang-DFxW5qM2.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-D8oswhFt.js";import{_ as C}from"./InputLabel.vue_vue_type_script_setup_true_lang-CEVvSszl.js";import{_ as P}from"./Select.vue_vue_type_script_setup_true_lang-CijPz9Ej.js";import{_ as S}from"./TextInput.vue_vue_type_script_setup_true_lang-OgsLRRa5.js";import{_ as N}from"./Table.vue_vue_type_script_setup_true_lang-BCLJ4Lew.js";import{P as U}from"./ProductRequestStatus-tW5n8ZRv.js";import{P as B}from"./ProductType-DHxMMxY3.js";import{_ as T,r as v,f as j,W as z}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-JRAjt2nF.js";import{_ as F}from"./DocumentText.vue_vue_type_script_setup_true_lang-DCMvrWDE.js";import{_ as W}from"./PencilSquare.vue_vue_type_script_setup_true_lang-CAQ2lHp3.js";import{_ as D}from"./Tick.vue_vue_type_script_setup_true_lang-nYQjxrA0.js";import"./multiselect-CuXlu8jW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-zYrl91-7.js";const K={class:"py-12"},L={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},O={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},Z={class:"text-gray-900 dark:text-gray-100"},A={class:"flex-col gap-1.5 pt-2"},G={class:"flex gap-1.5"},H={class:"flex gap-1.5"},I={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},J={class:"p-6 text-gray-900 dark:text-gray-100"},M={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},Q={class:"mt-6 space-y-6"},X={class:"p-2 pt-8"},Y={class:"flex items-center"},ee=["onClick"],te={class:"flex items-center"},se={key:0,class:"flex w-full bg-gray-200 h-0.5 dark:bg-gray-700"},ae={class:"mt-3"},re={class:"font-medium text-gray-900 dark:text-white"},xe=k({__name:"Edit",props:{productRequest:{},dataTable:{},productProductRequest:{}},setup(x){const u=x,i=q({_method:"put",id:u.productRequest.id,warehouse:u.productRequest.warehouse,status:null,products:u.productProductRequest}),p=s=>s>u.productRequest.status,w=async s=>{if(p(s))return i.status=s,new Promise((l,r)=>{i.post(route("product-requests.update",u.productRequest.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{l()},onError:()=>{r(new Error("Error, during update"))}})})},m=Object.entries(U).filter(([s])=>isNaN(Number(s))).map(([s,l])=>({name:s,value:l}));return(s,l)=>(n(),c(f,null,[a(t(V),{title:"Заявка"}),a(T,null,{header:d(()=>l[1]||(l[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Заявка ",-1)])),default:d(()=>[e("div",K,[e("div",L,[e("div",O,[a(R,null,{head:d(()=>l[2]||(l[2]=[e("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Продукти ",-1)])),default:d(()=>[e("div",Z,[a(N,{"data-table":s.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"type-search":!0,"advanced-filters":!1},{"cell(actual_quantity)":d(({value:r,item:o})=>[e("div",A,[a(S,{id:"actual_quantities_"+o.product_id,modelValue:t(i).products[o.product_id].actual_quantity,"onUpdate:modelValue":_=>t(i).products[o.product_id].actual_quantity=_,type:"number",placeholder:"Количество Пристигнало",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(b,{class:"mt-2",message:t(i).errors["products."+o.product_id+".actual_quantity"]},null,8,["message"])])]),"cell(product.type)":d(({value:r,item:o})=>[e("div",G,g(t(v)(t(j)(t(B),o.product.type))),1)]),"cell(action)":d(({value:r,item:o})=>[e("div",H,[a(t(h),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Редактирай продукт",href:s.route("products.edit",o.product_id)},{default:d(()=>[a(W,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),a(t(h),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Покажи продукт",href:s.route("products.show",o.product_id)},{default:d(()=>[a(F,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])])]),_:1},8,["data-table"])])]),_:1})]),e("div",I,[e("div",J,[e("div",M,[e("div",Q,[e("div",null,[a(C,{for:"warehouse",value:"За Склад"}),a(P,{id:"warehouse",modelValue:t(i).warehouse,"onUpdate:modelValue":l[0]||(l[0]=r=>t(i).warehouse=r),name:"warehouse",options:t(z),placeholder:"За Склад",disabled:"",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),a(b,{class:"mt-2",message:t(i).errors.warehouse},null,8,["message"])]),e("div",X,[e("ol",Y,[(n(!0),c(f,null,$(t(m),(r,o)=>(n(),c("li",{key:o,class:y(["relative w-full mb-6",{"cursor-pointer":p(r.value)}]),onClick:_=>w(r.value)},[e("div",te,[e("div",{class:y(["z-10 flex items-center justify-center w-6 h-6 rounded-full ring-0 ring-white sm:ring-8 dark:ring-gray-900 shrink-0",{"bg-blue-600 dark:bg-blue-900":s.productRequest.status>=r.value,"bg-gray-200 dark:bg-gray-700":s.productRequest.status<r.value}])},[a(D)],2),r.value<t(m).length?(n(),c("div",se)):E("",!0)]),e("div",ae,[e("h3",re,g(t(v)(r.name)),1)])],10,ee))),128))])])])])])])])])]),_:1})],64))}});export{xe as default};
