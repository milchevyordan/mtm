import{d as g,o as c,g as p,b as r,n as f,T as w,Q as v,a as d,u as a,w as i,F as k,Z as q,t as _,k as h,h as $,f as E}from"./app-D7oHT88o.js";import{_ as C}from"./Accordion.vue_vue_type_script_setup_true_lang-vxGirF_T.js";import{_ as V}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-B-aiEDJr.js";import{_ as I}from"./InputError.vue_vue_type_script_setup_true_lang-yptz9s-z.js";import{a as S,_ as P}from"./TextInput.vue_vue_type_script_setup_true_lang-CQR846yp.js";import{_ as T}from"./Select.vue_vue_type_script_setup_true_lang-B4h5BK_V.js";import{_ as B}from"./Table.vue_vue_type_script_setup_true_lang-CfoiyI_H.js";import{_ as W,d as M,W as N}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CG5OVOt9.js";import{_ as O}from"./DocumentText.vue_vue_type_script_setup_true_lang-CtIwB2C6.js";import{_ as R}from"./PencilSquare.vue_vue_type_script_setup_true_lang-C95UtJA4.js";import{_ as U}from"./Plus.vue_vue_type_script_setup_true_lang-DpZLFkv5.js";import"./PrimaryButton-FrbOBQhy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-BB4MaLJX.js";import"./multiselect-DwGB295h.js";import"./ApplicationLogo-BluBXKOJ.js";const F=g({__name:"Minus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(y){return(e,m)=>(c(),p("svg",{fill:"currentColor",viewBox:"0 -960 960 960","stroke-width":"1.8",stroke:"currentColor",class:f(e.classes)},m[0]||(m[0]=[r("path",{d:"M200-450v-60h560v60H200Z"},null,-1)]),2))}}),Q={class:"py-12"},Z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},j={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},z={class:"text-gray-900 dark:text-gray-100"},D={class:"flex gap-1.5"},H={class:"flex gap-1.5"},L=["onClick"],A=["onClick"],G={key:0,class:"flex gap-1.5 pt-2"},J={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},K={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},fe=g({__name:"Create",props:{dataTable:{}},setup(y){const e=w({id:null,warehouse:v().props.auth.user.warehouse,products:[],productIds:[]}),m=async l=>new Promise((t,s)=>{e.post(route("product-requests.store"),{preserveScroll:!0,preserveState:!0,only:l,onSuccess:()=>{t()},onError:()=>{s(new Error("Error, during update"))}})}),x=l=>{const t={[l.id]:{product_id:l.id,quantity:null}};e.products={...e.products,...t},e.productIds.push(l.id)},b=l=>{const t=e.productIds.indexOf(l);e.products.hasOwnProperty(l)&&delete e.products[l],t!==-1&&e.productIds.splice(t,1)};return(l,t)=>(c(),p(k,null,[d(a(q),{title:"Product Request"}),d(W,null,{header:i(()=>t[3]||(t[3]=[r("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product Request ",-1)])),default:i(()=>[r("div",Q,[r("div",Z,[r("div",j,[d(C,null,{head:i(()=>t[4]||(t[4]=[r("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Products ",-1)])),default:i(()=>[r("div",z,[d(B,{"data-table":l.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"selected-row-indexes":a(e).productIds,"selected-row-column":"id"},{"cell(created_at)":i(({value:s,item:o})=>[r("div",D,_(a(M)(s)),1)]),"cell(quantity_varna)":i(({value:s,item:o})=>{var n,u;return[r("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<o.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_france)":i(({value:s,item:o})=>{var n,u;return[r("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<o.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_netherlands)":i(({value:s,item:o})=>{var n,u;return[r("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<o.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(action)":i(({value:s,item:o})=>[r("div",H,[a(e).productIds.includes(o.id)?(c(),p("button",{key:0,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>b(o.id)},[d(F,{classes:"w-4 h-4 text-[#909090]"})],8,L)):(c(),p("button",{key:1,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>x(o)},[d(U,{classes:"w-4 h-4 text-[#909090]"})],8,A)),d(a(h),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:l.route("products.edit",o.id)},{default:i(()=>[d(R,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),d(a(h),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:l.route("products.show",o.id)},{default:i(()=>[d(O,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])]),a(e).productIds.includes(o.id)?(c(),p("div",G,[d(S,{id:"quantities_"+o.id,modelValue:a(e).products[o.id].quantity,"onUpdate:modelValue":n=>a(e).products[o.id].quantity=n,type:"number",placeholder:"Quantity",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"])])):$("",!0)]),_:1},8,["data-table","selected-row-indexes"])])]),_:1})]),r("div",J,[r("div",K,[r("div",X,[r("form",{class:"mt-6 space-y-6",onSubmit:t[2]||(t[2]=E(s=>m(),["prevent"]))},[r("div",null,[d(P,{for:"warehouse",value:"To Warehouse"}),d(T,{id:"warehouse",modelValue:a(e).warehouse,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).warehouse=s),name:"warehouse",options:a(N),placeholder:"To Warehouse",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),d(I,{class:"mt-2",message:a(e).errors.warehouse},null,8,["message"])]),d(V,{processing:a(e).processing,"recently-successful":a(e).recentlySuccessful,onReset:t[1]||(t[1]=s=>a(e).reset())},null,8,["processing","recently-successful"])],32)])])])])])]),_:1})],64))}});export{fe as default};
