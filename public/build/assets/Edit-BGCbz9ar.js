import{d as N,T as V,p as T,m as U,g as b,a,u as e,w as m,F as w,o as x,Z as C,b as r,f as k,l as B,k as q,e as L,t as _}from"./app-DNzCrRZN.js";import{_ as M}from"./Accordion.vue_vue_type_script_setup_true_lang-DFxW5qM2.js";import{_ as P}from"./ChangeLogs.vue_vue_type_script_setup_true_lang-Zd1731mu.js";import{_ as $}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-YRV1gGzj.js";import{_ as p}from"./InputError.vue_vue_type_script_setup_true_lang-D8oswhFt.js";import{_ as f}from"./InputLabel.vue_vue_type_script_setup_true_lang-CEVvSszl.js";import{_ as W}from"./Modal.vue_vue_type_script_setup_true_lang-DRaBN26d.js";import{_ as R}from"./Select.vue_vue_type_script_setup_true_lang-CijPz9Ej.js";import{_ as g}from"./TextInput.vue_vue_type_script_setup_true_lang-OgsLRRa5.js";import{_ as K}from"./Table.vue_vue_type_script_setup_true_lang-BCLJ4Lew.js";import{P as Z}from"./ProductType-DHxMMxY3.js";import{W as u,_ as z,w as A,f as G,d as E,a as H}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-JRAjt2nF.js";import{_ as I}from"./PencilSquare.vue_vue_type_script_setup_true_lang-CAQ2lHp3.js";import{_ as J}from"./Trash.vue_vue_type_script_setup_true_lang-BWupC1bQ.js";import"./PrimaryButton-PQwFCoLq.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-iIhSi5i1.js";import"./multiselect-CuXlu8jW.js";import"./ApplicationLogo-zYrl91-7.js";const O={class:"py-12"},X={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},Y={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},Q={class:"p-6 text-gray-900 dark:text-gray-100 space-y-4"},ee={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},te={class:"w-full flex gap-2"},ae={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4 mt-4"},se={class:"text-gray-900 dark:text-gray-100"},le={class:"flex gap-1.5"},re={class:"flex gap-1.5"},oe={class:"flex gap-1.5"},ne=["onClick"],ie={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},Fe=N({__name:"Edit",props:{product:{},dataTable:{},changeLogs:{}},setup(F){const i=F,c=(o,s)=>{var t;return((t=o==null?void 0:o.find(n=>n.warehouse===s))==null?void 0:t.quantity)??null},l=V({_method:"put",id:i.product.id,name:i.product.name,specification:i.product.specification,type:i.product.type,internal_id:i.product.internal_id,minimum_quantity:i.product.minimum_quantity,quantities:{Varna:c(i.product.quantity,u.Varna),France:c(i.product.quantity,u.France),Netherlands:c(i.product.quantity,u.Netherlands)}});T(()=>i.product.quantity,o=>{l.quantities.Varna=c(o,u.Varna),l.quantities.France=c(o,u.France),l.quantities.Netherlands=c(o,u.Netherlands)});const S=async o=>new Promise((s,t)=>{l.post(route("products.update",i.product.id),{preserveScroll:!0,preserveState:!0,forceFormData:!0,only:H(o),onSuccess:()=>{s()},onError:()=>{t(new Error("Error, during update"))}})}),y=U(!1),h=()=>{y.value=!1,d.reset()},j=o=>{var s;d.id=o.id,d.name=(s=o.project)==null?void 0:s.name,d.created_at=o.created_at,y.value=!0},d=V({id:null,name:null,created_at:null}),D=()=>{d.delete(route("projects.destroy-product"),{preserveScroll:!0}),h()};return(o,s)=>(x(),b(w,null,[a(e(C),{title:"Продукт"}),a(z,null,{header:m(()=>s[8]||(s[8]=[r("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Продукт ",-1)])),default:m(()=>[r("div",O,[r("div",X,[r("div",Y,[r("div",Q,[r("div",ee,[r("form",{class:"mt-6 space-y-6",onSubmit:s[6]||(s[6]=k(t=>S(),["prevent"]))},[r("div",null,[a(f,{for:"name",value:"Име"}),a(g,{id:"name",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=t=>e(l).name=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"name"},null,8,["modelValue"]),a(p,{class:"mt-2",message:e(l).errors.name},null,8,["message"])]),r("div",null,[a(f,{for:"specification",value:"Спецификация"}),a(g,{id:"specification",modelValue:e(l).specification,"onUpdate:modelValue":s[1]||(s[1]=t=>e(l).specification=t),type:"text",class:"mt-1 block w-full",required:"",autocomplete:"specification"},null,8,["modelValue"]),a(p,{class:"mt-2",message:e(l).errors.specification},null,8,["message"])]),r("div",null,[a(f,{for:"type",value:"Тип"}),a(R,{modelValue:e(l).type,"onUpdate:modelValue":s[2]||(s[2]=t=>e(l).type=t),name:"type",options:e(Z),placeholder:"Тип",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),a(p,{class:"mt-2",message:e(l).errors.type},null,8,["message"])]),r("div",null,[a(f,{for:"internal_id",value:"Вътрешен №"}),a(g,{id:"internal_id",modelValue:e(l).internal_id,"onUpdate:modelValue":s[3]||(s[3]=t=>e(l).internal_id=t),type:"text",class:"mt-1 block w-full"},null,8,["modelValue"]),a(p,{class:"mt-2",message:e(l).errors.internal_id},null,8,["message"])]),r("div",null,[a(f,{for:"minimum_quantity",value:"Минимално Количество"}),a(g,{id:"minimum_quantity",modelValue:e(l).minimum_quantity,"onUpdate:modelValue":s[4]||(s[4]=t=>e(l).minimum_quantity=t),type:"number",step:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),a(p,{class:"mt-2",message:e(l).errors.minimum_quantity},null,8,["message"])]),(x(!0),b(w,null,B(e(A),(t,n)=>(x(),b("div",{key:n},[a(f,{for:"quantities_"+t.name,value:`Количество ${t.name}`},null,8,["for","value"]),a(g,{id:"quantities_"+t.name,modelValue:e(l).quantities[t.name],"onUpdate:modelValue":v=>e(l).quantities[t.name]=v,type:"number",step:"1",class:"mt-1 block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),a(p,{class:"mt-2",message:e(l).errors["quantities."+t.name]},null,8,["message"])]))),128)),a($,{processing:e(l).processing,"recently-successful":e(l).recentlySuccessful,onReset:s[5]||(s[5]=t=>e(l).reset())},null,8,["processing","recently-successful"])],32)]),r("div",te,[a(e(q),{class:"w-full md:w-auto border border-gray-300 dark:border-gray-700 rounded-md px-5 py-1.5 active:scale-95 transition hover:bg-gray-50 dark:hover:bg-gray-800",href:o.route("products.create")},{default:m(()=>s[9]||(s[9]=[L(" Създай Нов Продукт ")])),_:1},8,["href"])])])]),a(P,{"change-logs-limited":o.product.change_logs_limited,"change-logs":o.changeLogs},null,8,["change-logs-limited","change-logs"]),r("div",ae,[a(M,null,{head:m(()=>s[10]||(s[10]=[r("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Проекти ",-1)])),default:m(()=>[r("div",se,[a(K,{"data-table":o.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1},{"cell(project.warehouse)":m(({value:t,item:n})=>[r("div",le,_(n.project?e(G)(e(u),n.project.warehouse):""),1)]),"cell(created_at)":m(({value:t,item:n})=>[r("div",re,_(e(E)(t)),1)]),"cell(action)":m(({value:t,item:n})=>[r("div",oe,[a(e(q),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Редактирай проект",href:o.route("projects.edit",n.project_id)},{default:m(()=>[a(I,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),r("button",{title:"Изтрий",class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:v=>j(n)},[a(J,{classes:"w-4 h-4 text-[#909090]"})],8,ne)])]),_:1},8,["data-table"])])]),_:1})])])])]),_:1}),a(W,{show:y.value,onClose:h},{default:m(()=>{var t,n;return[r("div",ie," Delete from проекта "+_(((t=e(d))==null?void 0:t.name)??"")+" added on "+_(e(E)((n=e(d))==null?void 0:n.created_at))+" ? ",1),r("form",{class:"col-span-2 flex justify-end gap-3 my-2 pt-1 px-4",onSubmit:k(D,["prevent"])},[a($,{processing:e(d).processing,"recently-successful":e(d).recentlySuccessful,"is-delete":!0,onReset:s[7]||(s[7]=v=>e(d).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{Fe as default};
