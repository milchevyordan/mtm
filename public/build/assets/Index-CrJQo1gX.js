import{d as B,o as E,g as F,b as o,n as h,l as x,T as q,a as t,u as e,w as i,F as I,Z as L,k,e as Z,t as m,f as j,q as G}from"./app-Do1M6Ex0.js";import{_ as C}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-CFL2XlnD.js";import{_}from"./InputError.vue_vue_type_script_setup_true_lang-CoN1obhA.js";import{_ as v}from"./InputLabel.vue_vue_type_script_setup_true_lang-BgA6hxHQ.js";import{_ as $}from"./Modal.vue_vue_type_script_setup_true_lang-DxuL_x4A.js";import{_ as J}from"./Select.vue_vue_type_script_setup_true_lang-CVdWkA3N.js";import{_ as S}from"./TextInput.vue_vue_type_script_setup_true_lang-Djt2rdPM.js";import{_ as O}from"./Table.vue_vue_type_script_setup_true_lang-BUdwnis6.js";import{_ as X,d as Q,f as D,W,b as Y}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-USk-GnZX.js";import{_ as ee}from"./DocumentText.vue_vue_type_script_setup_true_lang-DB1shhDg.js";import{_ as te}from"./PencilSquare.vue_vue_type_script_setup_true_lang-CMwgR0xv.js";import{_ as oe}from"./Trash.vue_vue_type_script_setup_true_lang-oao-WNzd.js";import"./multiselect-D7BucMPO.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ApplicationLogo-BY7f639T.js";const se=B({__name:"Plus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(P){return(f,y)=>(E(),F("svg",{fill:"none",viewBox:"0 0 24 24","stroke-width":"1.8",stroke:"currentColor",class:h(f.classes)},y[0]||(y[0]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m6-6H6"},null,-1)]),2))}}),ae={class:"py-12"},re={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},le={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},ne={class:"p-6 text-gray-900 dark:text-gray-100"},de={class:"w-full flex gap-2"},ue={class:"flex gap-1.5"},ie=["onClick"],ce=["onClick"],pe=["onClick"],me={class:"flex gap-1.5"},fe=["onClick"],ye=["onClick"],_e={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},ve={class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4"},he={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},ge={class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4"},be={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},We=B({__name:"Index",props:{dataTable:{},projects:{},projectWarehouse:{}},setup(P){const f=P,y=x(!1),g=x(!1),V=()=>{y.value=!1,d.reset()},M=()=>{g.value=!1,n.reset()},d=q({_method:"put",id:null,product_id:null,warehouse:null,quantity:null}),n=q({product_id:null,project_id:null,quantity:null,available_quantity:null,warehouse:null,quantities:null}),b=r=>{d.id=r.id,d.product_id=r.product_id,d.warehouse=r.warehouse,d.quantity=r.quantity,y.value=!0},U=async r=>{n.product_id=r.id,n.quantities=r.quantity,(!f.projects||!f.projectWarehouse)&&await new Promise((a,s)=>{G.reload({only:["projects","projectWarehouse"],onSuccess:a,onError:s})}),g.value=!0},N=r=>{var a;f.projectWarehouse&&(n.warehouse=f.projectWarehouse[r.value]??null,n.available_quantity=((a=n.quantities.find(s=>s.warehouse==n.warehouse))==null?void 0:a.quantity)??null)},R=()=>new Promise((r,a)=>{d.post(route("products.update-quantity",d.id),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r()},onError:()=>{a()}}),V()}),K=()=>new Promise((r,a)=>{n.post(route("products.add-to-project"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{r()},onError:()=>{a()}}),M()}),w=x(!1),c=q({id:null,name:null,created_at:null}),z=r=>{c.id=r.id,c.name=r.name,c.created_at=r.created_at,w.value=!0},T=()=>{w.value=!1,c.reset()},H=()=>{c.delete(route("products.destroy",c.id),{preserveScroll:!0}),T()};return(r,a)=>(E(),F(I,null,[t(e(L),{title:"Product"}),t(X,null,{header:i(()=>a[6]||(a[6]=[o("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product ",-1)])),default:i(()=>[o("div",ae,[o("div",re,[o("div",le,[o("div",ne,[t(O,{"data-table":r.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"show-trashed":!0,"advanced-filters":!1},{additionalContent:i(()=>[o("div",de,[t(e(k),{class:"w-full md:w-auto border border-gray-300 dark:border-gray-700 rounded-md px-5 py-1.5 active:scale-95 transition hover:bg-gray-50 dark:hover:bg-gray-800",href:r.route("products.create")},{default:i(()=>a[7]||(a[7]=[Z(" Create Product ")])),_:1},8,["href"])])]),"cell(created_at)":i(({value:s,item:l})=>[o("div",ue,m(e(Q)(s)),1)]),"cell(quantity_varna)":i(({value:s,item:l})=>{var u,p;return[o("div",{class:h(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=s[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:A=>b(s[0]??null)},m(((p=s[0])==null?void 0:p.quantity)??""),11,ie)]}),"cell(quantity_france)":i(({value:s,item:l})=>{var u,p;return[o("div",{class:h(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=s[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:A=>b(s[0]??null)},m(((p=s[0])==null?void 0:p.quantity)??""),11,ce)]}),"cell(quantity_netherlands)":i(({value:s,item:l})=>{var u,p;return[o("div",{class:h(["cursor-pointer text-center rounded",{"bg-red-500 text-white":(((u=s[0])==null?void 0:u.quantity)??null)<l.minimum_quantity}]),onClick:A=>b(s[0]??null)},m(((p=s[0])==null?void 0:p.quantity)??""),11,pe)]}),"cell(action)":i(({value:s,item:l})=>[o("div",me,[t(e(k),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:r.route("products.edit",l.id)},{default:i(()=>[t(te,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),t(e(k),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:r.route("products.show",l.id)},{default:i(()=>[t(ee,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),o("button",{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Add to project",onClick:u=>U(l)},[t(se,{classes:"w-4 h-4 text-[#909090]"})],8,fe),o("button",{title:"Delete",class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:u=>z(l)},[t(oe,{classes:"w-4 h-4 text-[#909090]"})],8,ye)])]),_:1},8,["data-table"])])])])])]),_:1}),t($,{show:y.value,"max-width":"lg",onClose:V},{default:i(()=>{var s,l;return[o("div",_e,[o("div",null,"Change quantity of product # "+m((s=e(d))==null?void 0:s.product_id),1)]),o("form",{class:"p-6",onSubmit:j(R,["prevent"])},[o("div",null,[t(v,{for:"quantity",value:`Quantity ${e(D)(e(W),(l=e(d))==null?void 0:l.warehouse)}`},null,8,["value"]),t(S,{id:"quantity",modelValue:e(d).quantity,"onUpdate:modelValue":a[0]||(a[0]=u=>e(d).quantity=u),type:"number",step:"1",class:"mt-1 block w-full"},null,8,["modelValue"]),t(_,{class:"mt-2",message:e(d).errors.quantity},null,8,["message"])]),o("div",ve,[t(C,{processing:e(d).processing,"recently-successful":e(d).recentlySuccessful,onReset:a[1]||(a[1]=u=>e(d).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),t($,{show:g.value,"max-width":"lg",onClose:M},{default:i(()=>{var s;return[o("div",he,[o("div",null,"Add product # "+m((s=e(n))==null?void 0:s.product_id)+" to project",1)]),o("form",{class:"p-6",onSubmit:j(K,["prevent"])},[o("div",null,[t(v,{for:"project",value:"Project"}),t(J,{modelValue:e(n).project_id,"onUpdate:modelValue":a[2]||(a[2]=l=>e(n).project_id=l),name:"project_id",options:r.projects,placeholder:"Project",class:"mt-1 block w-full mb-3.5",onSelect:N},null,8,["modelValue","options"]),t(_,{class:"mt-2",message:e(n).errors.project_id},null,8,["message"])]),o("div",null,[t(v,{for:"available_quantity",value:`Available quantity in ${e(D)(e(W),e(n).warehouse)??"warehouse"}`},null,8,["value"]),t(S,{id:"quantity","model-value":e(n).available_quantity,type:"number",placeholder:"Available quantity",disabled:!0,class:"mt-1 block w-full mb-3.5"},null,8,["model-value"]),t(_,{class:"mt-2",message:e(n).errors.available_quantity},null,8,["message"])]),o("div",null,[t(v,{for:"quantity",value:`Quantity to add to ${e(Y)(f.projects,e(n).project_id)??"project"}`},null,8,["value"]),t(S,{id:"quantity",modelValue:e(n).quantity,"onUpdate:modelValue":a[3]||(a[3]=l=>e(n).quantity=l),type:"number",placeholder:"Quantity to add",step:"1",min:0,max:e(n).available_quantity,class:"mt-1 block w-full"},null,8,["modelValue","max"]),t(_,{class:"mt-2",message:e(n).errors.quantity},null,8,["message"])]),o("div",ge,[t(C,{processing:e(d).processing,"recently-successful":e(d).recentlySuccessful,onReset:a[4]||(a[4]=l=>e(d).reset())},null,8,["processing","recently-successful"])])],32)]}),_:1},8,["show"]),t($,{show:w.value,onClose:T},{default:i(()=>{var s,l;return[o("div",be," Delete project "+m(((s=e(c))==null?void 0:s.name)??"")+" added on "+m(e(Q)((l=e(c))==null?void 0:l.created_at))+" ? ",1),o("form",{class:"col-span-2 flex justify-end gap-3 mt-2 pt-1 px-4",onSubmit:j(H,["prevent"])},[t(C,{processing:e(c).processing,"recently-successful":e(c).recentlySuccessful,"is-delete":!0,onReset:a[5]||(a[5]=u=>e(c).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{We as default};
