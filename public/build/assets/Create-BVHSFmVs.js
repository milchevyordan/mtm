import{d as y,o as c,g as p,b as a,n as f,T as v,Q as k,a as d,u as o,w as i,F as q,Z as $,t as _,k as g,h as E,f as C}from"./app-MO9c6B8p.js";import{_ as V}from"./Accordion.vue_vue_type_script_setup_true_lang-Dk97Aunc.js";import{_ as I}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-BhFICVXk.js";import{_ as h}from"./InputError.vue_vue_type_script_setup_true_lang-CsgQpNvn.js";import{_ as S}from"./InputLabel.vue_vue_type_script_setup_true_lang-BvWs4W_l.js";import{_ as P}from"./Select.vue_vue_type_script_setup_true_lang-Bp67GKQ4.js";import{_ as T}from"./TextInput.vue_vue_type_script_setup_true_lang-DdLkU7_r.js";import{_ as B}from"./Table.vue_vue_type_script_setup_true_lang-CLhoSBNu.js";import{_ as O,d as W,W as M}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Dn_6YJJb.js";import{_ as N}from"./DocumentText.vue_vue_type_script_setup_true_lang-BsQrJrLY.js";import{_ as R}from"./PencilSquare.vue_vue_type_script_setup_true_lang-BgyiztEx.js";import{_ as U}from"./Plus.vue_vue_type_script_setup_true_lang-DdOnmRy7.js";import"./PrimaryButton-laWfo_De.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-DJ5ftjbk.js";import"./multiselect-VTjvS1br.js";import"./ApplicationLogo-DNTm1rSG.js";const F=y({__name:"Minus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(x){return(e,m)=>(c(),p("svg",{fill:"currentColor",viewBox:"0 -960 960 960","stroke-width":"1.8",stroke:"currentColor",class:f(e.classes)},m[0]||(m[0]=[a("path",{d:"M200-450v-60h560v60H200Z"},null,-1)]),2))}}),Q={class:"py-12"},Z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},j={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},z={class:"text-gray-900 dark:text-gray-100"},D={class:"flex gap-1.5"},H={class:"flex gap-1.5"},L=["onClick"],A=["onClick"],G={key:0,class:"flex-col gap-1.5 pt-2 min-w-[150px]"},J={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},K={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},ge=y({__name:"Create",props:{dataTable:{}},setup(x){const e=v({id:null,warehouse:k().props.auth.user.warehouse,products:[],productIds:[]}),m=async l=>new Promise((t,s)=>{e.post(route("product-requests.store"),{preserveScroll:!0,preserveState:!0,only:l,onSuccess:()=>{t()},onError:()=>{s(new Error("Error, during update"))}})}),b=l=>{const t={[l.id]:{product_id:l.id,quantity:null}};e.products={...e.products,...t},e.productIds.push(l.id)},w=l=>{const t=e.productIds.indexOf(l);e.products.hasOwnProperty(l)&&delete e.products[l],t!==-1&&e.productIds.splice(t,1)};return(l,t)=>(c(),p(q,null,[d(o($),{title:"Product Request"}),d(O,null,{header:i(()=>t[3]||(t[3]=[a("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product Request ",-1)])),default:i(()=>[a("div",Q,[a("div",Z,[a("div",j,[d(V,null,{head:i(()=>t[4]||(t[4]=[a("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Products ",-1)])),default:i(()=>[a("div",z,[d(B,{"data-table":l.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"selected-row-indexes":o(e).productIds,"selected-row-column":"id"},{"cell(created_at)":i(({value:s,item:r})=>[a("div",D,_(o(W)(s)),1)]),"cell(quantity_varna)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_france)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_netherlands)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(action)":i(({value:s,item:r})=>[a("div",H,[o(e).productIds.includes(r.id)?(c(),p("button",{key:0,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>w(r.id)},[d(F,{classes:"w-4 h-4 text-[#909090]"})],8,L)):(c(),p("button",{key:1,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>b(r)},[d(U,{classes:"w-4 h-4 text-[#909090]"})],8,A)),d(o(g),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:l.route("products.edit",r.id)},{default:i(()=>[d(R,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),d(o(g),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:l.route("products.show",r.id)},{default:i(()=>[d(N,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])]),o(e).productIds.includes(r.id)?(c(),p("div",G,[d(T,{id:"quantities_"+r.id,modelValue:o(e).products[r.id].quantity,"onUpdate:modelValue":n=>o(e).products[r.id].quantity=n,type:"number",placeholder:"Order Quantity",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),d(h,{class:"mt-2",message:o(e).errors["products."+r.id+".quantity"]},null,8,["message"])])):E("",!0)]),_:1},8,["data-table","selected-row-indexes"])])]),_:1})]),a("div",J,[a("div",K,[a("div",X,[a("form",{class:"mt-6 space-y-6",onSubmit:t[2]||(t[2]=C(s=>m(),["prevent"]))},[a("div",null,[d(S,{for:"warehouse",value:"To Warehouse"}),d(P,{id:"warehouse",modelValue:o(e).warehouse,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).warehouse=s),name:"warehouse",options:o(M),placeholder:"To Warehouse",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),d(h,{class:"mt-2",message:o(e).errors.warehouse},null,8,["message"])]),d(I,{processing:o(e).processing,"recently-successful":o(e).recentlySuccessful,onReset:t[1]||(t[1]=s=>o(e).reset())},null,8,["processing","recently-successful"])],32)])])])])])]),_:1})],64))}});export{ge as default};
