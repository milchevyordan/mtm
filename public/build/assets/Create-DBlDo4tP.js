import{d as b,o as p,g as m,b as o,n as f,T as E,Q as h,a as l,u as t,w as i,F as $,Z as V,t as c,k as g,h as C,f as P}from"./app-BDKB0qeh.js";import{_ as I}from"./Accordion.vue_vue_type_script_setup_true_lang-BV0bCD2E.js";import{_ as S}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-BGmeT33M.js";import{_ as y}from"./InputError.vue_vue_type_script_setup_true_lang-XM304iQx.js";import{_ as T}from"./InputLabel.vue_vue_type_script_setup_true_lang-4nNF0Njq.js";import{_ as N}from"./Select.vue_vue_type_script_setup_true_lang-Bz26zGgq.js";import{_ as O}from"./TextInput.vue_vue_type_script_setup_true_lang-zXHHhjQY.js";import{_ as B}from"./Table.vue_vue_type_script_setup_true_lang-DOrQf0rV.js";import{P as W}from"./ProductType-DHxMMxY3.js";import{W as x,_ as U,d as j,r as M,f as R}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Ch8_Gsdz.js";import{_ as F}from"./DocumentText.vue_vue_type_script_setup_true_lang-Ctsgb_X5.js";import{_ as Q}from"./PencilSquare.vue_vue_type_script_setup_true_lang-CxOqqb5j.js";import{_ as Z}from"./Plus.vue_vue_type_script_setup_true_lang-CCscqBwl.js";import"./PrimaryButton-Bgy5znnT.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-BMRjcZWp.js";import"./multiselect-D7Xk1hqr.js";import"./ApplicationLogo-DTsC1tCr.js";const z=b({__name:"Minus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(w){return(e,_)=>(p(),m("svg",{fill:"currentColor",viewBox:"0 -960 960 960","stroke-width":"1.8",stroke:"currentColor",class:f(e.classes)},_[0]||(_[0]=[o("path",{d:"M200-450v-60h560v60H200Z"},null,-1)]),2))}}),D={class:"py-12"},H={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},K={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},L={class:"text-gray-900 dark:text-gray-100"},A={class:"flex gap-1.5"},G={class:"flex gap-1.5"},J={class:"flex gap-1.5"},X=["onClick"],Y=["onClick"],ee={key:0,class:"flex-col gap-1.5 pt-2 min-w-[150px]"},te={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},se={class:"p-6 text-gray-900 dark:text-gray-100"},re={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},ve=b({__name:"Create",props:{dataTable:{}},setup(w){const e=E({id:null,warehouse:h().props.auth.user.warehouse!=x.Varna?h().props.auth.user.warehouse:null,products:[],productIds:[]}),_=async d=>new Promise((a,s)=>{e.post(route("product-requests.store"),{preserveScroll:!0,preserveState:!0,only:d,onSuccess:()=>{a()},onError:()=>{s(new Error("Error, during update"))}})}),v=d=>{const a={[d.id]:{product_id:d.id,quantity:null}};e.products={...e.products,...a},e.productIds.push(d.id)},k=d=>{const a=e.productIds.indexOf(d);e.products.hasOwnProperty(d)&&delete e.products[d],a!==-1&&e.productIds.splice(a,1)},q=Object.fromEntries(Object.entries(x).filter(([d])=>isNaN(Number(d))&&d!=="Varna"));return(d,a)=>(p(),m($,null,[l(t(V),{title:"Product Request"}),l(U,null,{header:i(()=>a[3]||(a[3]=[o("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product Request ",-1)])),default:i(()=>[o("div",D,[o("div",H,[o("div",K,[l(I,null,{head:i(()=>a[4]||(a[4]=[o("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Products ",-1)])),default:i(()=>[o("div",L,[l(B,{"data-table":d.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"type-search":!0,"selected-row-indexes":t(e).productIds,"selected-row-column":"id"},{"cell(created_at)":i(({value:s,item:r})=>[o("div",A,c(t(j)(s)),1)]),"cell(type)":i(({value:s,item:r})=>[o("div",G,c(t(M)(t(R)(t(W),s))),1)]),"cell(quantity_varna)":i(({value:s,item:r})=>{var n,u;return[o("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},c(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_france)":i(({value:s,item:r})=>{var n,u;return[o("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},c(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_netherlands)":i(({value:s,item:r})=>{var n,u;return[o("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},c(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(action)":i(({value:s,item:r})=>[o("div",J,[t(e).productIds.includes(r.id)?(p(),m("button",{key:0,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>k(r.id)},[l(z,{classes:"w-4 h-4 text-[#909090]"})],8,X)):(p(),m("button",{key:1,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>v(r)},[l(Z,{classes:"w-4 h-4 text-[#909090]"})],8,Y)),l(t(g),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:d.route("products.edit",r.id)},{default:i(()=>[l(Q,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),l(t(g),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:d.route("products.show",r.id)},{default:i(()=>[l(F,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])]),t(e).productIds.includes(r.id)?(p(),m("div",ee,[l(O,{id:"quantities_"+r.id,modelValue:t(e).products[r.id].quantity,"onUpdate:modelValue":n=>t(e).products[r.id].quantity=n,type:"number",placeholder:"Order Quantity",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),l(y,{class:"mt-2",message:t(e).errors["products."+r.id+".quantity"]},null,8,["message"])])):C("",!0)]),_:1},8,["data-table","selected-row-indexes"])])]),_:1})]),o("div",te,[o("div",se,[o("div",re,[o("form",{class:"mt-6 space-y-6",onSubmit:a[2]||(a[2]=P(s=>_(),["prevent"]))},[o("div",null,[l(T,{for:"warehouse",value:"To Warehouse"}),l(N,{id:"warehouse",modelValue:t(e).warehouse,"onUpdate:modelValue":a[0]||(a[0]=s=>t(e).warehouse=s),name:"warehouse",options:t(q),placeholder:"To Warehouse",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),l(y,{class:"mt-2",message:t(e).errors.warehouse},null,8,["message"])]),l(S,{processing:t(e).processing,"recently-successful":t(e).recentlySuccessful,onReset:a[1]||(a[1]=s=>t(e).reset())},null,8,["processing","recently-successful"])],32)])])])])])]),_:1})],64))}});export{ve as default};
