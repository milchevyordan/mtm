import{d as j,T as _,m as V,g as D,a as t,u as e,w as n,F,o as T,Z as C,b as r,f as h,t as m,k as y}from"./app-DapBW2EV.js";import{_ as B}from"./Accordion.vue_vue_type_script_setup_true_lang-B-5nyLCZ.js";import{_ as L}from"./ChangeLogs.vue_vue_type_script_setup_true_lang-Dvgj3XVT.js";import{_ as v}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-n3dw5b-i.js";import{_ as b}from"./InputError.vue_vue_type_script_setup_true_lang-B5LG8gSQ.js";import{_ as x}from"./InputLabel.vue_vue_type_script_setup_true_lang-BaWqg3TJ.js";import{_ as M}from"./Modal.vue_vue_type_script_setup_true_lang-CHu_SmNk.js";import{_ as P}from"./Select.vue_vue_type_script_setup_true_lang-C6jMc4p7.js";import{_ as U}from"./TextInput.vue_vue_type_script_setup_true_lang-C9sXzEmA.js";import{_ as N}from"./Table.vue_vue_type_script_setup_true_lang-BgbxKFsI.js";import{P as R}from"./ProductType-DHxMMxY3.js";import{_ as W,W as q,d as w,r as K,f as Z,a as z}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Cb408-1X.js";import{_ as A}from"./DocumentText.vue_vue_type_script_setup_true_lang-DmhEPTep.js";import{_ as G}from"./PencilSquare.vue_vue_type_script_setup_true_lang-CrUEsMyZ.js";import{_ as H}from"./Trash.vue_vue_type_script_setup_true_lang-D1VzK2p4.js";import"./PrimaryButton-D3xmpsCX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-Bdl0aDCV.js";import"./multiselect-DZ7PeIVW.js";import"./ApplicationLogo-CEwqYtxw.js";const I={class:"py-12"},J={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 space-y-6"},O={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800"},Q={class:"p-6 text-gray-900 dark:text-gray-100"},X={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},Y={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4 mt-4"},ee={class:"text-gray-900 dark:text-gray-100"},se={class:"flex gap-1.5"},te={class:"flex gap-1.5"},re={class:"flex gap-1.5"},ae=["onClick"],oe={class:"border-b border-gray-100 dark:border-gray-700 px-3.5 p-3 text-xl font-medium"},je=j({__name:"Edit",props:{project:{},dataTable:{},changeLogs:{}},setup(k){const c=k,l=_({_method:"put",id:c.project.id,name:c.project.name,warehouse:c.project.warehouse}),$=async o=>new Promise((s,a)=>{l.post(route("projects.update",c.project.id),{preserveScroll:!0,preserveState:!0,forceFormData:!0,only:z(o),onSuccess:()=>{s()},onError:()=>{a(new Error("Error, during update"))}})}),u=V(!1),f=()=>{u.value=!1,d.reset()},E=o=>{var s;d.id=o.id,d.name=(s=o.product)==null?void 0:s.name,d.created_at=o.created_at,u.value=!0},d=_({id:null,name:null,created_at:null}),S=()=>{d.delete(route("projects.destroy-product"),{preserveScroll:!0}),f()};return(o,s)=>(T(),D(F,null,[t(e(C),{title:"Проект"}),t(W,null,{header:n(()=>s[5]||(s[5]=[r("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Проект ",-1)])),default:n(()=>[r("div",I,[r("div",J,[r("div",O,[r("div",Q,[r("div",X,[r("form",{class:"mt-6 space-y-6",onSubmit:s[3]||(s[3]=h(a=>$(),["prevent"]))},[r("div",null,[t(x,{for:"name",value:"Име"}),t(U,{id:"name",modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(l).name=a),type:"text",class:"mt-1 block w-full",required:""},null,8,["modelValue"]),t(b,{class:"mt-2",message:e(l).errors.name},null,8,["message"])]),r("div",null,[t(x,{for:"warehouse",value:"Склад"}),t(P,{modelValue:e(l).warehouse,"onUpdate:modelValue":s[1]||(s[1]=a=>e(l).warehouse=a),name:"warehouse",options:e(q),placeholder:"Склад",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),t(b,{class:"mt-2",message:e(l).errors.warehouse},null,8,["message"])]),t(v,{processing:e(l).processing,"recently-successful":e(l).recentlySuccessful,onReset:s[2]||(s[2]=a=>e(l).reset())},null,8,["processing","recently-successful"])],32)])])]),r("div",Y,[t(B,null,{head:n(()=>s[6]||(s[6]=[r("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Продукти ",-1)])),default:n(()=>[r("div",ee,[t(N,{"data-table":o.dataTable,"per-page-options":[5,10,15,20,50],"type-search":!0,"global-search":!0,"advanced-filters":!1},{"cell(created_at)":n(({value:a,item:i})=>[r("div",se,m(e(w)(a)),1)]),"cell(product.type)":n(({value:a,item:i})=>[r("div",te,m(e(K)(e(Z)(e(R),i.product.type))),1)]),"cell(action)":n(({value:a,item:i})=>{var p,g;return[r("div",re,[t(e(y),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Редактирай продукт",href:o.route("products.edit",(p=i.product)==null?void 0:p.id)},{default:n(()=>[t(G,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),t(e(y),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Покажи продукт",href:o.route("products.show",(g=i.product)==null?void 0:g.id)},{default:n(()=>[t(A,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),r("button",{title:"Delete продукт",class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:le=>E(i)},[t(H,{classes:"w-4 h-4 text-[#909090]"})],8,ae)])]}),_:1},8,["data-table"])])]),_:1})]),t(L,{"change-logs-limited":o.project.change_logs_limited,"change-logs":o.changeLogs},null,8,["change-logs-limited","change-logs"])])])]),_:1}),t(M,{show:u.value,onClose:f},{default:n(()=>{var a,i;return[r("div",oe," Delete product "+m(((a=e(d))==null?void 0:a.name)??"")+" added on "+m(e(w)((i=e(d))==null?void 0:i.created_at))+" ? ",1),r("form",{class:"col-span-2 flex justify-end gap-3 my-2 pt-1 px-4",onSubmit:h(S,["prevent"])},[t(v,{processing:e(d).processing,"recently-successful":e(d).recentlySuccessful,"is-delete":!0,onReset:s[4]||(s[4]=p=>e(d).reset())},null,8,["processing","recently-successful"])],32)]}),_:1},8,["show"])],64))}});export{je as default};
