import{d as b,o as c,g as p,b as a,n as f,T as $,Q as h,a as l,u as o,w as i,F as E,Z as V,t as _,k as g,h as C,f as I}from"./app-DAbYb2vv.js";import{_ as S}from"./Accordion.vue_vue_type_script_setup_true_lang-oTEcwSsI.js";import{_ as P}from"./ResetSaveButtons.vue_vue_type_script_setup_true_lang-DHdhTW2m.js";import{_ as y}from"./InputError.vue_vue_type_script_setup_true_lang-BV-YcJ_7.js";import{_ as T}from"./InputLabel.vue_vue_type_script_setup_true_lang-CE8v7oz8.js";import{_ as N}from"./Select.vue_vue_type_script_setup_true_lang-CnIBBA5m.js";import{_ as O}from"./TextInput.vue_vue_type_script_setup_true_lang-CkelCZ7S.js";import{_ as W}from"./Table.vue_vue_type_script_setup_true_lang-C9O9liey.js";import{W as x,_ as B,d as j}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-Du-zednV.js";import{_ as M}from"./DocumentText.vue_vue_type_script_setup_true_lang-MFNsrQL4.js";import{_ as R}from"./PencilSquare.vue_vue_type_script_setup_true_lang-6TM63cvL.js";import{_ as U}from"./Plus.vue_vue_type_script_setup_true_lang-DVqko7Mg.js";import"./PrimaryButton-BBS5AR-0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SecondaryButton.vue_vue_type_script_setup_true_lang-GicdNelz.js";import"./multiselect-D-expTso.js";import"./ApplicationLogo-3jOI2Qmj.js";const F=b({__name:"Minus",props:{classes:{default:"w-6 h-6 flex-shrink-0"}},setup(w){return(e,m)=>(c(),p("svg",{fill:"currentColor",viewBox:"0 -960 960 960","stroke-width":"1.8",stroke:"currentColor",class:f(e.classes)},m[0]||(m[0]=[a("path",{d:"M200-450v-60h560v60H200Z"},null,-1)]),2))}}),Q={class:"py-12"},Z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},z={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4"},D={class:"text-gray-900 dark:text-gray-100"},H={class:"flex gap-1.5"},L={class:"flex gap-1.5"},A=["onClick"],G=["onClick"],J={key:0,class:"flex-col gap-1.5 pt-2 min-w-[150px]"},K={class:"bg-white shadow-sm sm:rounded-lg dark:bg-gray-800 mt-4"},X={class:"p-6 text-gray-900 dark:text-gray-100"},Y={class:"grid lg:grid-cols-1 xl:grid-cols-2 gap-4"},ge=b({__name:"Create",props:{dataTable:{}},setup(w){const e=$({id:null,warehouse:h().props.auth.user.warehouse!=x.Varna?h().props.auth.user.warehouse:null,products:[],productIds:[]}),m=async d=>new Promise((t,s)=>{e.post(route("product-requests.store"),{preserveScroll:!0,preserveState:!0,only:d,onSuccess:()=>{t()},onError:()=>{s(new Error("Error, during update"))}})}),v=d=>{const t={[d.id]:{product_id:d.id,quantity:null}};e.products={...e.products,...t},e.productIds.push(d.id)},k=d=>{const t=e.productIds.indexOf(d);e.products.hasOwnProperty(d)&&delete e.products[d],t!==-1&&e.productIds.splice(t,1)},q=Object.fromEntries(Object.entries(x).filter(([d])=>isNaN(Number(d))&&d!=="Varna"));return(d,t)=>(c(),p(E,null,[l(o(V),{title:"Product Request"}),l(B,null,{header:i(()=>t[3]||(t[3]=[a("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Product Request ",-1)])),default:i(()=>[a("div",Q,[a("div",Z,[a("div",z,[l(S,null,{head:i(()=>t[4]||(t[4]=[a("div",{class:"font-semibold text-xl sm:text-2xl mb-4 text-gray-900 dark:text-gray-100"}," Products ",-1)])),default:i(()=>[a("div",D,[l(W,{"data-table":d.dataTable,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"selected-row-indexes":o(e).productIds,"selected-row-column":"id"},{"cell(created_at)":i(({value:s,item:r})=>[a("div",H,_(o(j)(s)),1)]),"cell(quantity_varna)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_france)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(quantity_netherlands)":i(({value:s,item:r})=>{var n,u;return[a("div",{class:f(["text-center rounded",{"bg-red-500 text-white":(((n=s[0])==null?void 0:n.quantity)??null)<r.minimum_quantity}])},_(((u=s[0])==null?void 0:u.quantity)??""),3)]}),"cell(action)":i(({value:s,item:r})=>[a("div",L,[o(e).productIds.includes(r.id)?(c(),p("button",{key:0,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>k(r.id)},[l(F,{classes:"w-4 h-4 text-[#909090]"})],8,A)):(c(),p("button",{key:1,class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",onClick:n=>v(r)},[l(U,{classes:"w-4 h-4 text-[#909090]"})],8,G)),l(o(g),{class:"border border-[#E9E7E7] dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Edit product",href:d.route("products.edit",r.id)},{default:i(()=>[l(R,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"]),l(o(g),{class:"border border-gray-300 dark:border-gray-700 rounded-md p-1 active:scale-90 transition",title:"Show product",href:d.route("products.show",r.id)},{default:i(()=>[l(M,{classes:"w-4 h-4 text-[#909090]"})]),_:2},1032,["href"])]),o(e).productIds.includes(r.id)?(c(),p("div",J,[l(O,{id:"quantities_"+r.id,modelValue:o(e).products[r.id].quantity,"onUpdate:modelValue":n=>o(e).products[r.id].quantity=n,type:"number",placeholder:"Order Quantity",step:"1",class:"block w-full"},null,8,["id","modelValue","onUpdate:modelValue"]),l(y,{class:"mt-2",message:o(e).errors["products."+r.id+".quantity"]},null,8,["message"])])):C("",!0)]),_:1},8,["data-table","selected-row-indexes"])])]),_:1})]),a("div",K,[a("div",X,[a("div",Y,[a("form",{class:"mt-6 space-y-6",onSubmit:t[2]||(t[2]=I(s=>m(),["prevent"]))},[a("div",null,[l(T,{for:"warehouse",value:"To Warehouse"}),l(N,{id:"warehouse",modelValue:o(e).warehouse,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).warehouse=s),name:"warehouse",options:o(q),placeholder:"To Warehouse",class:"mt-1 block w-full mb-3.5"},null,8,["modelValue","options"]),l(y,{class:"mt-2",message:o(e).errors.warehouse},null,8,["message"])]),l(P,{processing:o(e).processing,"recently-successful":o(e).recentlySuccessful,onReset:t[1]||(t[1]=s=>o(e).reset())},null,8,["processing","recently-successful"])],32)])])])])])]),_:1})],64))}});export{ge as default};
