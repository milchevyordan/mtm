import{d as L,m as C,o as r,g as o,b as e,a as c,w as _,F as u,l as g,h as l,t,u as b,q as F,n as k}from"./app-n74OYpRG.js";import{_ as E}from"./Accordion.vue_vue_type_script_setup_true_lang-1Uegg_rx.js";import{_ as S}from"./Modal.vue_vue_type_script_setup_true_lang-Co33LTsk.js";import{_ as D}from"./Table.vue_vue_type_script_setup_true_lang-C7LsGOlu.js";import{d as w}from"./AuthenticatedLayout.vue_vue_type_script_setup_true_lang-CEJEOf-p.js";const N={class:"relative rounded-lg shadow-sm bg-white dark:bg-gray-800 py-4 sm:py-6 px-4 mt-4"},B={key:0,class:"overflow-y-auto max-h-96"},M={class:"lg:border-r border-[#E9E7E7] dark:border-gray-700 lg:pr-8 sm:gap-y-2 items-center flex flex-col"},V={class:"element-center"},$={class:"text-[#6D6D73] dark:text-gray-200 bg-[#F2F2F7] dark:bg-gray-700 cursor-default rounded px-3 py-1 font-light m-1"},h={class:"element-center"},J={class:"text-[#6D6D73] dark:text-gray-200 bg-[#F2F2F7] dark:bg-gray-700 cursor-default rounded px-3 py-1 font-light m-1"},O={class:"lg:pl-4 items-center flex flex-row"},T={class:"flex flex-wrap"},j={class:"flex flex-wrap"},q={key:0},z={key:1,class:"text-gray-500 dark:text-gray-400"},P={key:2},A={key:3},G={key:0,class:"text-gray-900 dark:text-gray-100"},H={class:"flex gap-1.5"},K={class:"flex flex-wrap"},Q={class:"flex flex-wrap"},R={key:0},U={key:1,class:"text-gray-500 dark:text-gray-400"},W={key:2},X={key:3},Y={class:"flex gap-1.5"},ts=L({__name:"ChangeLogs",props:{changeLogsLimited:{},changeLogs:{}},setup(Z){const x=C(!1),v=async()=>{await new Promise((d,a)=>{F.reload({only:["changeLogs"],onSuccess:d,onError:a})}),x.value=!0},m=()=>{x.value=!1};return(d,a)=>(r(),o(u,null,[e("div",N,[c(E,null,{head:_(()=>[e("div",{class:"mb-4 text-gray-900 dark:text-gray-100 flex justify-between"},[a[0]||(a[0]=e("div",{class:"font-semibold text-xl sm:text-2xl"}," История на промените ",-1)),e("button",{class:"mr-10 md:w-auto border border-gray-300 dark:border-gray-700 rounded-md px-5 py-1.5 active:scale-95 transition hover:bg-gray-50 dark:hover:bg-gray-800",onClick:v}," Покажи всички ")])]),default:_(()=>[d.changeLogsLimited?(r(),o("div",B,[(r(!0),o(u,null,g(d.changeLogsLimited,(n,i)=>(r(),o("div",{key:i,class:k(["grid lg:grid-cols-2 gap-4 mb-4 pb-4",{"border-b border-[#E9E7E7] dark:border-gray-700":i!==d.changeLogsLimited.length-1}])},[e("div",M,[e("div",V,[a[1]||(a[1]=e("span",{class:"mr-2 text-[#C7C7CC] dark:text-gray-500"}," Създател ",-1)),e("span",$,t(n.creator.name),1)]),e("div",h,[a[2]||(a[2]=e("span",{class:"mr-2 text-[#C7C7CC] dark:text-gray-500"}," Дата ",-1)),e("span",J,t(b(w)(n.created_at)),1)])]),e("div",O,[e("ul",T,[(r(!0),o(u,null,g(JSON.parse(n.change),(f,p)=>(r(),o("li",{key:p},[e("ul",j,[(r(!0),o(u,null,g(f,(s,y)=>(r(),o("li",{key:y,class:k(["border border-gray-200 dark:border-gray-600 px-3 py-1 rounded-lg space-x-1 m-1 text-gray-900 dark:text-gray-200",{"bg-red-100 dark:bg-red-800":(s==null?void 0:s.old)&&!(s!=null&&s.new)}])},[String(p)!="main"?(r(),o("span",q,t(p)+" |",1)):l("",!0),e("span",null,t(y)+" |",1),s!=null&&s.old?(r(),o("span",z,t(s==null?void 0:s.old),1)):l("",!0),s!=null&&s.old&&(s!=null&&s.new)?(r(),o("span",P,"→")):l("",!0),s!=null&&s.new?(r(),o("span",A,t(s==null?void 0:s.new),1)):l("",!0)],2))),128))])]))),128))])])],2))),128))])):l("",!0)]),_:1})]),c(S,{show:x.value,"max-width":"6xl",onClose:m},{default:_(()=>[a[3]||(a[3]=e("div",{class:"px-3.5 p-3 text-xl font-medium"}," История на промените ",-1)),d.changeLogs?(r(),o("div",G,[c(D,{"data-table":d.changeLogs,"per-page-options":[5,10,15,20,50],"global-search":!0,"advanced-filters":!1,"prop-name":"changeLogs"},{"cell(change)":_(({value:n,item:i})=>[e("div",H,[e("ul",K,[(r(!0),o(u,null,g(JSON.parse(n),(f,p)=>(r(),o("li",{key:p},[e("ul",Q,[(r(!0),o(u,null,g(f,(s,y)=>(r(),o("li",{key:y,class:k(["border border-gray-200 dark:border-gray-600 px-3 py-1 rounded-lg space-x-1 m-1 text-gray-900 dark:text-gray-200",{"bg-red-100 dark:bg-red-800":(s==null?void 0:s.old)&&!(s!=null&&s.new)}])},[String(p)!="main"?(r(),o("span",R,t(p)+" |",1)):l("",!0),e("span",null,t(y)+" |",1),s!=null&&s.old?(r(),o("span",U,t(s==null?void 0:s.old),1)):l("",!0),s!=null&&s.old&&(s!=null&&s.new)?(r(),o("span",W,"→")):l("",!0),s!=null&&s.new?(r(),o("span",X,t(s==null?void 0:s.new),1)):l("",!0)],2))),128))])]))),128))])])]),"cell(created_at)":_(({value:n,item:i})=>[e("div",Y,t(b(w)(n)),1)]),_:1},8,["data-table"])])):l("",!0)]),_:1},8,["show"])],64))}});export{ts as _};
